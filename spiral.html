<html>
<style>
    .scene {
        perspective: 1050px;
        width: 100%;
        height: 100vh;
        transform-style: preserve-3d;
    }

    .sphere {
        position: absolute;
        transform-style: preserve-3d;
        left: 40%;
        top: 40%;
    }

    .sphere_ring {
        width: 400px;
        height: 400px;
        border: 1px solid blueviolet;
        position: absolute;
        border-radius: 50%;
        transform-style: preserve-3d;
        transform: rotateY(10deg);
    }

    .sphere_face {
        background: blue;
        position: absolute;
        transform-origin: top;
        border: 2px solid black;
        box-sizing: border-box;
    }

    .cube {
        position: absolute;
        top: 50%;
        right: 50%;
        width: 100px;
        height: 100px;
        transform-style: preserve-3d;
    }

    .cube__face {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        position: absolute;
        backface-visibility: inherit;
        font-size: 60px;
        color: white;
    }

    .cube__face--1 {
        background: rgba(90, 90, 90, 0.7);
    }

    .cube__face--2 {
        background: rgba(0, 210, 0, 0.7);
    }

    .cube__face--3 {
        background: rgba(210, 0, 0, 0.7);
    }

    .cube__face--4 {
        background: rgba(0, 0, 210, 0.7);
    }

    .cube__face--5 {
        background: rgba(210, 210, 0, 0.7);
    }

    .cube__face--6 {
        background: rgba(210, 0, 210, 0.7);
    }
</style>

<body>
    <div class="scene">
        <div class="sphere" style="transform: rotateX(326deg) rotateY(-312deg);">
        </div>
        <div class="cube" style="transform: rotateX(326deg) rotateY(-312deg);">
        </div>
    </div>
</body>
<script>
    const sphere = document.querySelector(".sphere");
    const cuboid = document.querySelector(".cube")
    const sphereWidth = 400;
    const sphereHeight = 400;
    const facesNumber = 100;
    const spiralFaces = 200;
    const ringsNumber = 1;
    const gravity = 0.1;

    const cubeWidth = 400;
    const cubeHeight = 400;
    const cubeLong = 600;
    let speed = 0;
    let distance = 0;

    init();

    function init() {
        setSphere();
        elementMovement(sphere)
        // setCuboid();
    }

    let movementDistance = 200;
    let angle = 0;
    function setSphere() {
        sphere.style.width = sphereWidth;
        sphere.style.height = sphereHeight;
        createRings();
    }

    function createRings() {
        for (let index = 0; index < ringsNumber; index++) {
            const ring = document.createElement("div");
            ring.classList.add("sphere_ring");
            ring.classList.add(`sphere_ring--${index}`);
            ring.style.width = `${sphereWidth}px`;
            ring.style.height = `${sphereHeight}px`;
            ring.style.transform = `rotateY(${(180 / ringsNumber) * index}deg)`;
            sphere.appendChild(ring);
            calculateFaces(90, ring);
        }
    }

    function calculateFaces(yDegrees, sphereRing) {
        const angle = 360 / facesNumber;
        for (let index = 0; index < spiralFaces; index++) {
            setTimeout(() => {
                // Convertir el ángulo a radianes: angle * index * π / 180
                const theta = angle * index * Math.PI / 180;

                // Calcular coordenadas: x = centro + r * cos(θ), y = centro - r * sin(θ)
                const rightPosition = ((sphereWidth-index) / 2 + (Math.cos(theta) * (sphereWidth-index) / 2));
                const bottomPosition = ((sphereHeight-index) / 2 - (Math.sin(theta) * (sphereHeight-index) / 2));

                // Calcular ángulo intermedio para la rotación (en grados)
                const rotationAngle = 360 + (angle / 2) - (angle * index);

                generateFace(rightPosition, bottomPosition, rotationAngle, yDegrees, sphereRing);
            }, 50 * index)
        }
    }

    function generateFace(rightPosition, bottomPosition, rotationAngle, yDegrees, sphereRing) {
        const face = document.createElement("div");
        face.classList.add("sphere_face");

        // Ajustar left y top, restando 0.5px para centrar el div de 1px de ancho
        face.style.height = Math.PI * sphereHeight / facesNumber;
        face.style.width = Math.PI * sphereWidth / facesNumber;
        face.style.left = (rightPosition - 0.5) + "px";
        face.style.top = bottomPosition + "px"; // No ajustamos top porque transform-origin: top

        face.style.transform = `translate(-50%) rotateZ(${rotationAngle}deg) rotateY(90deg)`;

        sphereRing.appendChild(face);
    }

    function elementMovement(element) {
        let isMouseDown = false;
        let mousePos = {
            x: 0,
            y: 0,
        }
        let lastMouseX = 0;
        let lastMouseY = 0;
        let sumX = 0;
        let sumY = 0;
        function handleHold() {
            if (isMouseDown) {
                requestAnimationFrame(handleHold); // Continue looping
            }
        }

        document.addEventListener('mousemove', (event) => {
            if (event.buttons === 1) {
                const currentMouseX = event.clientX
                const currentMouseY = event.clientY

                if (currentMouseX > lastMouseX) {
                    sumX += 2;
                } else if (currentMouseX < lastMouseX) {
                    sumX -= 2;
                }

                if (currentMouseY > lastMouseY) {
                    sumY -= 2;
                } else if (currentMouseY < lastMouseY) {
                    sumY += 2;
                }

                lastMouseX = currentMouseX;
                lastMouseY = currentMouseY;
                element.style.transform = `rotateX(${sumY}deg) rotateY(${sumX}deg)`;
            }
        });

        document.addEventListener('mousedown', (event) => {
            mousePos.x = event.screenX;
            mousePos.y = event.screenY;
            isMouseDown = true;
        });

        document.addEventListener('mouseup', () => {
            isMouseDown = false;
        });
    }
</script>

</html>